---
title: 渗透实战
date: 2022-01-21 19:07:03
tags:
      - 安全
      - 渗透
categories:
      - 渗透
description:
keywords:
---

# 渗透实战



nmap -T4 -A -v [目标IP]对网站进行扫描//查看开放端口

nikto -h [http://目标ip]对网站进行探测

然后查看获取的网站页面,然后进行访问测试



如果获取到登录界面可以使用爆破的方式

字典位置是`/usr/share/wordlists/wfuzz/Injections`

然后cp SQL.txt /

![image-20220121192838244](D:\YH\diary\image\实战-1.png)

然后开始攻击,如果登录进去试着上传木马漏洞



靶场一

首先第一题，《我最熟练的sql注入》

![image-20220123145924171](D:\Code\pojo\Blog\BlogHexo\public\img\靶场-1.png)

首先他告诉你闭合方式了，然后你就可以尽情的猜了

我们首先随便提交一个内容发现是使用base64来提交的

然后我们构建一个简单的sql来尝试

![image-20220123150845012](D:\Code\pojo\Blog\BlogHexo\public\img\靶场-2.png)



发现是可以提交成功就可以判断

or和=都没有被屏蔽

然后使用order by来测试字段数，检测出来是8个

union select 进行查询，然后报错了大小写过滤测，双写测试发现发现双写可以

==并且！！！post不能使用--+但是可以使用-- -==

然后爆破数据库就可以了

> 注意key是关键字



第二题

撞库

![image-20220123152403583](D:\Code\pojo\Blog\BlogHexo\public\img\靶场-3.png)



从他给的源码可以看出，他是对你传上去的==文件名==拼接上一个数字后进行md5进行加密然后再拼接上你文件的后缀名

我用1.php为例子

> md5(1.php+rand(1,99999)).php

所以只需要上传多点文件然后使用burp撞就可以了



第三题

![image-20220123152903145](D:\Code\pojo\Blog\BlogHexo\public\img\靶场-4.png)

首先他一下就给出来了我们要干啥

首先使用php://input命令发现不可以

使用php://filter/resource=路径名  发现可以

直接php://filter/resource=../key.php  答案出来了



第四题

这是个留言板,发起留言后自己也可以出去看到结果

我们首先使用

```
<script>alert(1)<script>
```

然后发现被屏蔽了,我们首先猜测他是使用正则所以

```
<script >alert(1)</script >
```

发现可以,所以我们来截获他的cookie,我们使用nc来检测本地

> nc -lvp 4444

只用下面的命令来获取cookie

![1](D:\Code\pojo\Blog\BlogHexo\public\img\靶场-5.png)



172.16.1.161是黑客的ip



第五题

Linux的执行命令

这里没啥难度,就是有些命令被屏蔽了需要使用\'\'来隔离(别的也可以)

并且key.php权限不够需要改权限



综合一

答案在robots.txt里面



综合二

再进robots.txt就可以看见他上传文件的位置

然后再访问备份网站

> 源网站的.bak就可以看到他的源码

可以看出他的加密逻辑和第二题一样并且一分钟一次的删除

![image-20220123155651840](D:\Code\pojo\Blog\BlogHexo\public\img\靶场-6.png)
